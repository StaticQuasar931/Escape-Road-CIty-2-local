<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="robots" content="index, follow, max-image-preview:large" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/icon.png" />

    <title>Escape Road City 2 – StaticQuasar931</title>
    <meta name="description" content="Escape Road City 2 unblocked driving game on StaticQuasar931. Race through the city, dodge traffic, and escape the roadblock traps right in your browser." />

    <!-- Local CSS from your GitHub repo -->
    <link rel="stylesheet" href="theme/game.css" />
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500&display=swap" rel="stylesheet" />

    <style type="text/css">
        .jss1:before {
            top: 0;
            width: 100%;
            filter: blur(16px);
            height: 100%;
            content: "";
            display: block;
            opacity: .5;
            z-index: 0;
            position: absolute;
            background-size: cover;
            background-image: url("loading.png");
        }

        :root{
            --brand:#5ee1ff;
            --glow:0 0 12px rgba(94,225,255,.65), 0 0 32px rgba(155,255,183,.35);
            --shadow:0 10px 30px rgba(0,0,0,.4);
        }
        html, body{
            margin:0;
            height:100%;
            background:#000;
            color:#eaf4ff;
            font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
        }

        /* Static Menu (top left) */
        #staticMenu{
            position:fixed;
            left:12px;
            top:12px;
            z-index:9999;
            display:flex;
            gap:10px;
            align-items:center;
            user-select:none;
            padding:10px 14px;
            border-radius:12px;
            background:linear-gradient(135deg, rgba(20,20,28,.9), rgba(20,20,28,.6));
            border:1px solid rgba(94,225,255,.35);
            color:#e8f3ff;
            box-shadow:var(--glow), var(--shadow);
            font-size:14px;
            animation:menuEnter .6s ease .15s both;
        }
        #staticMenu a{
            color:#5ee1ff;
            font-weight:800;
            text-decoration:none;
        }
        #closeStaticMenu{
            color:#f55;
            cursor:pointer;
            padding:2px 6px;
            border-radius:6px;
            border:1px solid rgba(255,255,255,.15);
            background:rgba(255,255,255,.06);
        }
        @keyframes menuEnter{
            from{opacity:0; transform:translateY(-8px);}
            to{opacity:1; transform:translateY(0);}
        }

        /* Rotating slide in widget (bottom right) */
        #staticSlideMenu{
            position:fixed;
            bottom:24px;
            right:24px;
            z-index:9999;
            width:100px;
            height:100px;
            pointer-events:none;
            opacity:0;
            transform:translateX(140px) scale(.96);
        }
        #staticSlideMenu a{
            display:block;
            width:100%;
            height:100%;
        }
        #staticSlideMenu img{
            width:100%;
            height:100%;
            object-fit:contain;
            border:0;
            border-radius:0;
            background:transparent;
            box-shadow:none;
            transition:opacity .25s ease;
        }
        .slide-in{
            animation:slideIn 2s ease forwards;
        }
        .slide-out{
            animation:slideOut 2s ease forwards;
        }
        @keyframes slideIn{
            from{opacity:0; transform:translateX(140px) scale(.96);}
            to{opacity:1; transform:translateX(0) scale(1);}
        }
        @keyframes slideOut{
            from{opacity:1; transform:translateX(0) scale(1);}
            to{opacity:0; transform:translateX(140px) scale(.96);}
        }

        /* Hidden SEO helper */
        .seo-hidden{
            position:absolute;
            width:1px;
            height:1px;
            overflow:hidden;
            clip:rect(1px,1px,1px,1px);
            white-space:nowrap;
        }

        @media (max-width:600px){
            #staticMenu{
                font-size:13px;
                padding:8px 12px;
            }
            #staticSlideMenu{
                width:88px;
                height:88px;
            }
        }
    </style>

    <script>
        // Local build config - uses your GitHub repo files
        var buildUrl = "Build";
        var loaderUrl = buildUrl + "/escape-road-city-2-v25030706.loader.js";
        var config = {
            dataUrl: buildUrl + "/escape-road-city-2-v25030706.data.unityweb",
            frameworkUrl: buildUrl + "/escape-road-city-2-v25030706.framework.js.unityweb",
            codeUrl: buildUrl + "/escape-road-city-2-v25030706.wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "azgames.io",
            productName: "Escape Road City 2",
            productVersion: "25030706",
            pubId: ""
        };
        config.gameId = "escape-road-city-2";
        config.eventLog = true;
        config.buildAPI = "https://event.azgame.io/apiaz/event";
        let currentDate = new Date();
        let endLogDate = new Date("2025-03-28T01:38:48.219Z");
        if (currentDate > endLogDate) {
            config.eventLog = false;
        }
        config.enableMoreGame = "yes";
        config.enablePromotion = true;
        config.gdHost = isHostOnGD();
        if (config.gdHost) {
            config.enableMoreGame = "no";
            config.enablePromotion = false;
            config.eventLog = false;
            config.gdGameId = "escape-road-city-2";
        }

        function isHostOnGD() {
            return false;
        }

        function isDiffHost() {
            return false;
        }
    </script>
</head>

<body>
    <!-- Static Menu (top left) -->
    <div id="staticMenu" role="region" aria-label="StaticQuasar menu">
        <a href="https://sites.google.com/view/staticquasar931/gm3z" target="_blank" rel="noopener">
            More Unblocked Games by Static
        </a>
        <span id="closeStaticMenu" title="Hide temporarily">✕</span>
    </div>

    <!-- Rotating quick link widget (bottom right) - Google Form -> Discord -> Instagram -->
    <div id="staticSlideMenu" aria-live="polite">
        <a id="staticSlideLink" href="https://sites.google.com/view/staticquasar931/google-form" target="_blank" rel="noopener" aria-label="Open Google Form">
            <img id="staticSlideImg" src="https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/GoogleForm.png" alt="StaticQuasar931 Google Form for feedback and requests">
        </a>
    </div>

    <!-- Unity container -->
    <div id="unity-container" style="display:none;">
        <canvas id="unity-canvas"></canvas>
    </div>

    <!-- Loading screen -->
    <div id="loadingBlock" style="">
        <div class="jss31 jss34 jss1">
            <div style="position:absolute; font-family:Arial, Helvetica, sans-serif; bottom:10px; right:10px; font-size:18px; color:#ffffff; opacity:0.5;">25030706</div>
            <div class="spinner"></div>
            <div class="jss31 jss34 jss48" style="flex:1 1 0%;">
                <div class="jss32">
                    <div class="jss7 jss9 jss20 jss3">
                        <div class="jss125">
                            <div class="jss123">
                                <img src="logo.png" alt="Escape Road City 2 logo">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jss31 jss34" style="flex:3 1 0%;">
                <div class="jss32">
                    <div class="jss31 jss34 jss39 jss50 gameloader">
                        <div class="jss32">
                            <div class="gameloader-game-name">Escape Road City 2</div>
                        </div>
                        <div class="jss32">
                            <div class="jss32 gameloader-logo">
                                <img id="game-logo" src="loading.png" alt="Escape Road City 2 loading art">
                            </div>
                        </div>
                        <div class="jss32">
                            <div>
                                <div class="gameloader-progressbar">
                                    <div class="gameloader-progressbar-progress" id="progress_fill" style="width:0%;"></div>
                                </div>
                                <div class="gameloader-progress-info">Game Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Unity loader -->
    <script>
        var progressElement = document.getElementById("progress_fill");
        var container = document.getElementById("unity-container");
        var canvas = document.getElementById("unity-canvas");
        var loadingBar = document.querySelector("#loadingBlock");
        var progressBarFull = document.querySelector("#progress_fill");
        var progress_text = document.querySelector(".gameloader-progress-info");
        let text_percent = "";
        var script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                progressElement.style.width = (100 * progress) + "%";
                text_percent = "Downloading file: " + Math.round(progress * 100) + "%";
                progress_text.innerText = text_percent;
                if (progress >= 0.99) {
                    progress_text.innerText = "Game Loading ...";
                }
            }).then((unityInstance) => {
                window.unityInstance = unityInstance;
                setTimeout(function () {
                    loadingBar.style.display = "none";
                    window.focus();
                }, 2000);
                container.style.display = "block";
            }).catch((message) => {
                alert(message);
            });
        };
        // this runs after body exists so document.body is not null
        document.body.appendChild(script);
    </script>

    <!-- Firebase and analytics -->
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-analytics-compat.js"></script>
    <script type="module">
        const firebaseConfig = {
            apiKey: "AIzaSyD8svwqDuAbajzxRPEOhQ-uy7_DzCVJDdo",
            authDomain: "escape-road-city-2.firebaseapp.com",
            projectId: "escape-road-city-2",
            storageBucket: "escape-road-city-2.firebasestorage.app",
            messagingSenderId: "90526123059",
            appId: "1:90526123059:web:bf5b7a4f9aea0132320f46",
            measurementId: "G-280CK82GH0"
        };
        if (firebaseConfig) {
            window.dataLayer = window.dataLayer || [];
            window.gtag = function () {
                window.dataLayer.push(arguments);
            };
            window.gtag("config", firebaseConfig.measurementId, {
                cookie_domain: window.location.hostname,
                cookie_flags: "SameSite=None;Secure"
            });
            const app = firebase.initializeApp(firebaseConfig);
        }
    </script>
    <script>
        function firebaseSetUserProperties(props) {
            firebase.analytics().setUserProperties(props);
        }
        function firebaseLogEvent(event_name) {
            firebase.analytics().logEvent(event_name);
        }
        function firebaseLogEventParameter(event_name, event_param) {
            firebase.analytics().logEvent(event_name, event_param);
        }
    </script>

    <!-- gmsoft SDK - moved to bottom so document.body is ready -->
    <script id="gmsoft-jsaasdk" src="gmsoftsdkdadadd_v5.js"></script>

    <!-- Visual SEO scripts (leave warning, menu logic, rotator, y+u+i toggle) -->
    <script>
        // Leave warning
        window.onbeforeunload = () => "Are you sure you want to leave? Your game session may be interrupted.";

        // Static Menu show and hide for 3 minutes
        (function(){
            const menu = document.getElementById("staticMenu");
            const btn  = document.getElementById("closeStaticMenu");
            const KEY  = "sq931_staticMenu_hidden_until";
            const show = () => { if (menu) menu.style.display = "flex"; };
            const hideFor3m = () => {
                if (!menu) return;
                menu.style.display = "none";
                const until = Date.now() + 180000;
                localStorage.setItem(KEY, String(until));
                setTimeout(show, 180000);
            };
            const until = parseInt(localStorage.getItem(KEY) || "0", 10);
            if (until && Date.now() < until){
                if (menu) menu.style.display = "none";
                setTimeout(show, until - Date.now());
            } else {
                show();
            }
            if (btn) btn.onclick = hideFor3m;
        })();

        // Rotator: Google Form -> Discord -> Instagram
        (function(){
            const wrap = document.getElementById("staticSlideMenu");
            const a    = document.getElementById("staticSlideLink");
            const img  = document.getElementById("staticSlideImg");

            const FORM = {
                src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/GoogleForm.png",
                alt:  "StaticQuasar931 Google Form for feedback and requests",
                link: "https://sites.google.com/view/staticquasar931/google-form"
            };
            const DISCORD = {
                src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/Join_Our_DC_StaticQuassar931_lcplrf.png",
                alt:  "Join the StaticQuasar931 Discord",
                link: "https://discord.gg/DP2hM7RRhR"
            };
            const INSTA = {
                src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/Follow-us--IG",
                alt:  "StaticQuasar931 Instagram",
                link: "https://www.instagram.com/freeschoolgamepage/"
            };
            const ROTATION = [FORM, DISCORD, INSTA];

            ROTATION.forEach(o => {
                const p = new Image();
                p.src = o.src;
            });

            const T_IN = 2000, T_SHOW = 5000, T_OUT = 2000, T_HIDDEN = 20000;
            let idx = 0;

            function apply(state){
                a.href = state.link;
                img.alt = state.alt;
                img.style.opacity = "0";
                setTimeout(() => { img.src = state.src; }, 80);
                img.onload = () => { img.style.opacity = "1"; };
            }
            function delay(ms){ return new Promise(r => setTimeout(r, ms)); }

            (async function cycle(){
                for(;;){
                    apply(ROTATION[idx]);
                    wrap.style.pointerEvents = "auto";
                    wrap.classList.remove("slide-out");
                    wrap.classList.add("slide-in");
                    await delay(T_IN + T_SHOW);
                    wrap.classList.remove("slide-in");
                    wrap.classList.add("slide-out");
                    await delay(T_OUT);
                    wrap.style.pointerEvents = "none";
                    await delay(T_HIDDEN);
                    idx = (idx + 1) % ROTATION.length;
                }
            })();
        })();

        // Keyboard secret toggle: y + u + i toggles Visual SEO
        (function(){
            const idsToToggle = ["staticMenu", "staticSlideMenu"];
            let seq = [];
            const target = ["y","u","i"];
            function toggle(){
                idsToToggle.forEach(id => {
                    const el = document.getElementById(id);
                    if(!el) return;
                    const isHidden = (el.style.display === "none" || getComputedStyle(el).display === "none");
                    el.style.display = isHidden ? (id === "staticMenu" ? "flex" : "block") : "none";
                });
            }
            window.addEventListener("keydown", (e)=>{
                seq.push(e.key.toLowerCase());
                if (seq.length > 3) seq.shift();
                if (seq.join("") === target.join("")) toggle();
            });
        })();
    </script>

    <!-- Hidden SEO helper -->
    <div class="seo-hidden" aria-hidden="true">
        <h1>Escape Road City 2 unblocked by StaticQuasar931</h1>
        <p>Play Escape Road City 2, a fast paced city escape driving game hosted by StaticQuasar931. Dodge traffic, weave through blocked roads, and enjoy a smooth WebGL experience at school or home.</p>
    </div>
</body>
</html>
